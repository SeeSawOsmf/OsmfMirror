<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication
	xmlns:mx				="http://www.adobe.com/2006/mxml"
	layout					="vertical"
	applicationComplete		="init()"
	paddingLeft				="0"
	paddingTop				="0"
	paddingRight			="0"
	paddingBottom			="5"
	width					="800"
	height					="500"
	>
	
	<mx:DataGrid
		width	="100%"
		height	="100%"
		id		="grid"
		>
		<mx:columns>
			<mx:DataGridColumn width="25" headerText="ID" dataField="0"/>
			<mx:DataGridColumn width="25" headerText="Time" dataField="1"/>
			<mx:DataGridColumn width="50" headerText="Type" dataField="2"/>
			<mx:DataGridColumn headerText="Message" dataField="3"/>
			<mx:DataGridColumn width="50" headerText="Parameters" dataField="4"/>
		</mx:columns>
	</mx:DataGrid>
	
	<mx:HBox>
	
		<mx:Button
			label	="Clear"
			click	="{grid.dataProvider = log = new ArrayCollection()}"
			/>
			
		<mx:Button
			label	="{paused ? 'Resume' : 'Pause'}"
			click	="{paused = !paused}"
			/>
		
	</mx:HBox>
	
	<mx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			
			private function init():void
			{
				log = new ArrayCollection();
				grid.dataProvider = log;
				
				receiver = new LocalConnection();
				receiver.allowDomain("*");
				receiver.client
					= 	{ debug: receiverDebug
						};
						
				receiver.connect("_OSMFWebPlayerDebugger");	
			}
			
			private function receiverDebug(items:Array):void
			{
				if (paused == false)
				{
					for each (var args:Array in items)
					{
						log.addItemAt(args, 0);
					}
				}
			}
			
			private var receiver:LocalConnection;
			private var log:ArrayCollection;
			
			[Bindable]
			private var paused:Boolean;
		]]>
	</mx:Script>
	
</mx:WindowedApplication>
